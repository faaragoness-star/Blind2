Title,Body,Labels
Modal de checkout accesible + fallback,"**Objetivo**: Modal WCAG 2.2 con focus-trap y CTA fallback a checkout nativo si falla.
**Criterios**:
- Focus visible, `Esc` cierra, bloqueo de scroll en fondo.
- Eventos `ui.checkout.open/close/confirm` con `request_id`.
- Fallback a checkout clásico si `/validate-sign` falla o > 2s.
","P0,Capa:Front,Tipo:Feature"
Idempotencia en Add-to-Cart con /validate-sign,"**Objetivo**: Evitar líneas duplicadas. Usar `idempotency_key` al invocar `/validate-sign`.
**Criterios**:
- Reintentos no generan ítems duplicados.
- Logs con `request_id` y latencias.
","P0,Capa:WP-Plugin,Tipo:Feature"
Protocolo visor v1 (iframe + bridge),"**Objetivo**: Definir mensajes `viewer:ready (<2.5s)`, `g3d:apply`, `viewer:change`.
**Criterios**:
- ACK por cada `apply`.
- `viewer:change` emite `{state, sku_hash}`.
","P0,Capa:Viewer,Tipo:Feature"
Editor de Pricing mínimo (price_version),"**Objetivo**: Gestionar `price_version` y recálculo en validate.
**Criterios**:
- CRUD de precios por material/modelo/extra.
- Validación de integridad antes de publicar snapshot.
","P1,Capa:Admin,Tipo:Feature"
USD visual + FX fijo,"**Objetivo**: Mostrar USD como referencia, pedido en EUR; revalidar si cambia FX fijo.
**Criterios**:
- Selector de moneda visual.
- No afecta al SKU; sólo a la UI y a la línea de pedido.
","P1,Capa:Front,Tipo:Feature"
Publicación de Snapshots,"**Objetivo**: Publicar `snap:` y `ver:` con retención vigente+20 y ruta uploads.
**Criterios**:
- Botón “Publicar” en admin.
- Artefactos JSON adjuntos en release.
","P1,Capa:Admin,Capa:Schemas,Tipo:Task"
CI E2E con fixtures (sku_hash/firma),"**Objetivo**: Recomputar hash y firma contra fixtures; TTL válido.
**Criterios**:
- Workflow `ci-e2e.yml` verde en cada PR.
","P2,Capa:CI,Capa:Schemas,Tipo:CI"
Linter de assets (GLB/KTX2/presupuestos),"**Objetivo**: Enforce budgets por pieza y escena.
**Criterios**:
- Tamaño GLB ≤ 3MB, escena ≤ 8MB; avisos PNG vs KTX2.
","P2,Capa:Assets,Tipo:CI"
